#!/usr/bin/env ruby
# frozen_string_literal: true

load File.expand_path("../with_rubygems", __FILE__) if ENV["RGV"]

require "rubygems"

development_dependencies = Gem::Specification.load(File.expand_path("../../bundler.gemspec", __FILE__)).development_dependencies

simplecov = development_dependencies.find do |dep|
  dep.name == "simplecov"
end

simplecov_requirement = simplecov.requirement.to_s

begin
  gem "simplecov", simplecov_requirement
rescue Gem::LoadError
  warn "We couln't activate simplecov (#{simplecov_requirement}). Try `gem install simplecov:'#{simplecov_requirement}'`"
end

require "simplecov"

rspec = development_dependencies.find do |dep|
  dep.name == "rspec"
end

rspec_requirement = rspec.requirement.to_s

begin
  gem "rspec", rspec_requirement
rescue Gem::LoadError
  warn "We couln't activate rspec (#{rspec_requirement}). Try `gem install rspec:'#{rspec_requirement}'`"
end

load Gem.bin_path("rspec-core", "rspec")
